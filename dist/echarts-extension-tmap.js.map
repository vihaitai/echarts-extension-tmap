{"version":3,"file":"echarts-extension-tmap.js","sources":["../src/helper.js","../src/TMapCoordSys.js","../src/TMapModel.js","../src/TMapView.js","../src/index.js","../index.js"],"sourcesContent":["import { version } from 'echarts/lib/echarts'\n\nexport const ecVer = version.split('.')\n\nexport const isNewEC = ecVer[0] > 4\n\nexport const COMPONENT_TYPE = 'tmap'\n\nexport function v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1]\n}\n\nlet logMap = {}\n\nexport function logWarn(tag, msg, once) {\n  const log = `[ECharts][Extension][TMap]${tag ? ' ' + tag + ':' : ''} ${msg}`\n  once && logMap[log] || console.warn(log)\n  once && (logMap[log] = true)\n}\n\nexport function clearLogMap() {\n  logMap = {}\n}\n","import { util as zrUtil, graphic, matrix } from 'echarts/lib/echarts'\nimport { COMPONENT_TYPE, logWarn } from './helper'\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(\n    [0, 1],\n    function(dimIdx) {\n      const val = dataItem[dimIdx]\n      const halfSize = dataSize[dimIdx] / 2\n      const p1 = []\n      const p2 = []\n      p1[dimIdx] = val - halfSize\n      p2[dimIdx] = val + halfSize\n      p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx]\n      return Math.abs(\n        this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]\n      )\n    },\n    this\n  )\n}\n\nconst excludedOptions = [\n  'echartsLayerInteractive',\n  'renderOnMoving',\n  'largeMode',\n  'layers'\n]\n\nfunction TMapCoordSys(tmap, api) {\n  this._tmap = tmap\n  this._api = api\n  this._mapOffset = [0, 0]\n}\n\nconst TMapCoordSysProto = TMapCoordSys.prototype\n\nTMapCoordSysProto.setZoom = function(zoom) {\n  this._zoom = zoom\n}\n\nTMapCoordSysProto.setCenter = function(center) {\n  const lnglat = new T.LngLat(center[0], center[1])\n  this._center = this._tmap.lngLatToContainerPoint(lnglat)\n}\n\nTMapCoordSysProto.setMapOffset = function(mapOffset) {\n  this._mapOffset = mapOffset\n}\n\nTMapCoordSysProto.setTMap = function(tmap) {\n  this._tmap = tmap\n}\n\nTMapCoordSysProto.getTMap = function() {\n  return this._tmap\n}\n\nTMapCoordSysProto.dataToPoint = function(data) {\n  const lnglat = new T.LngLat(data[0], data[1])\n  const px = this._tmap.lngLatToContainerPoint(lnglat)\n  const mapOffset = this._mapOffset\n  return [px.x - mapOffset[0], px.y - mapOffset[1]]\n}\n\nTMapCoordSysProto.pointToData = function(pt) {\n  const mapOffset = this._mapOffset\n  const lnglat = this._tmap.containerPointToLngLat(\n    new T.Point(\n      pt[0] + mapOffset[0],\n      pt[1] + mapOffset[1]\n    )\n  )\n  return [lnglat.lng, lnglat.lat]\n}\n\nTMapCoordSysProto.getViewRect = function() {\n  const api = this._api\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight())\n}\n\nTMapCoordSysProto.getRoamTransform = function() {\n  return matrix.create()\n}\n\nTMapCoordSysProto.prepareCustoms = function() {\n  const rect = this.getViewRect()\n  return {\n    coordSys: {\n      type: COMPONENT_TYPE,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this) // TODO: FIXME\n    }\n  }\n}\n\nTMapCoordSysProto.convertToPixel = function(ecModel, finder, value) {\n  // here we don't use finder as only one tmap component is allowed\n  return this.dataToPoint(value);\n}\n\nTMapCoordSysProto.convertFromPixel = function(ecModel, finder, value) {\n  // here we don't use finder as only one tmap component is allowed\n  return this.pointToData(value);\n}\n\n// less useful\n// TMapCoordSysProto.containPoint = function(point) {\n//   return this._tmap.getBounds().contains(this.pointToData(point));\n// }\n\nTMapCoordSys.create = function(ecModel, api) {\n  let tmapCoordSys\n  ecModel.eachComponent(COMPONENT_TYPE, function(tmapModel) {\n    if (typeof T === 'undefined') {\n      throw new Error('T api is not loaded')\n    }\n    if (tmapCoordSys) {\n      throw new Error('Only one tmap component is allowed')\n    }\n    let tmap = tmapModel.getTMap()\n    const echartsLayerInteractive = tmapModel.get('echartsLayerInteractive')\n    if (!tmap) {\n      const root = api.getDom()\n      const painter = api.getZr().painter\n      const viewportRoot = painter.getViewportRoot()\n      viewportRoot.className = COMPONENT_TYPE + '-ec-layer'\n      // PENDING not hidden?\n      viewportRoot.style.visibility = 'hidden'\n      const className = 'ec-extension-' + COMPONENT_TYPE\n      // Not support IE8\n      let tmapRoot = root.querySelector('.' + className)\n      if (tmapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in tmapView\n        viewportRoot.style.left = '0px'\n        viewportRoot.style.top = '0px'\n        root.removeChild(tmapRoot)\n      }\n      tmapRoot = document.createElement('div')\n      tmapRoot.className = className\n      tmapRoot.style.cssText = 'position:absolute;top:0;left:0;bottom:0;right:0;'\n      root.appendChild(tmapRoot)\n\n      const options = zrUtil.clone(tmapModel.get())\n      // delete excluded options\n      zrUtil.each(excludedOptions, function(key) {\n        delete options[key]\n      })\n\n      tmap = new T.Map(tmapRoot, options)\n\n      const nativeSetMapStyle = tmap.setStyle\n      tmap.setStyle = function () {\n        let style = arguments[0]\n        logWarn('style', style)\n        nativeSetMapStyle.apply(this, arguments)\n        tmapModel.__mapStyle = style\n      }\n\n      setTimeout(() => {\n        tmapRoot.appendChild(viewportRoot)\n        viewportRoot.style.visibility = ''\n        viewportRoot.style.zIndex = 1000\n      }, 10 * 2)\n      tmapModel.setTMap(tmap)\n      tmapModel.setRoot(tmapRoot)\n      tmapModel.setEChartsLayer(viewportRoot)\n\n      // Override\n      painter.getViewportRootOffset = function() {\n        return { offsetLeft: 0, offsetTop: 0 }\n      }\n    }\n\n    const oldEChartsLayerInteractive = tmapModel.__echartsLayerInteractive\n    if (oldEChartsLayerInteractive !== echartsLayerInteractive) {\n      tmapModel.setEChartsLayerInteractive(echartsLayerInteractive)\n      tmapModel.__echartsLayerInteractive = echartsLayerInteractive\n    }\n\n    const center = tmapModel.get('center')\n    const zoom = tmapModel.get('zoom')\n    if (center && zoom) {\n      const tmapCenter = tmap.getCenter()\n      const tmapZoom = tmap.getZoom()\n      const centerOrZoomChanged = tmapModel.centerOrZoomChanged(\n        [tmapCenter.lng, tmapCenter.lat],\n        tmapZoom\n      )\n      if (centerOrZoomChanged) {\n        tmap.centerAndZoom(new T.LngLat(center[0], center[1]), zoom)\n      }\n    }\n\n    // update map style(#13)\n    const originalMapStyle = tmapModel.__mapStyle\n    const newMapStyle = tmapModel.get('mapStyle')\n    if (originalMapStyle !== newMapStyle) {\n      tmap.setStyle(tmapModel.__mapStyle = newMapStyle)\n    }\n\n    tmapCoordSys = new TMapCoordSys(tmap, api)\n    tmapCoordSys.setMapOffset(tmapModel.__mapOffset || [0, 0])\n    tmapCoordSys.setZoom(zoom)\n    tmapCoordSys.setCenter(center)\n\n    tmapModel.coordinateSystem = tmapCoordSys\n  })\n\n  ecModel.eachSeries(function(seriesModel) {\n    if (seriesModel.get('coordinateSystem') === COMPONENT_TYPE) {\n      // inject coordinate system\n      seriesModel.coordinateSystem = tmapCoordSys\n    }\n  })\n\n  // return created coordinate systems\n  return tmapCoordSys && [tmapCoordSys]\n}\n\nTMapCoordSysProto.dimensions = TMapCoordSys.dimensions = ['lng', 'lat']\n\nTMapCoordSysProto.type = COMPONENT_TYPE\n\n\nexport default TMapCoordSys\n","import { ComponentModel } from 'echarts/lib/echarts'\nimport { COMPONENT_TYPE, isNewEC, v2Equal } from './helper'\n\nconst TMapModel = {\n  type: COMPONENT_TYPE,\n\n  setTMap(tmap) {\n    this.__tmap = tmap\n  },\n\n  getTMap() {\n    return this.__tmap\n  },\n\n  setRoot(root) {\n    this.__root = root\n  },\n\n  getRoot(root) {\n    return this.__root\n  },\n\n  setEChartsLayer(layer) {\n    this.__echartsLayer = layer\n  },\n\n  getEChartsLayer() {\n    return this.__echartsLayer\n  },\n\n  setEChartsLayerVisibility(visible) {\n    this.__echartsLayer.style.display = visible ? 'block' : 'none'\n  },\n\n  // FIXME: NOT SUPPORT <= IE 10\n  setEChartsLayerInteractive(interactive) {\n    this.option.echartsLayerInteractive = !!interactive\n    this.__echartsLayer.style.pointerEvents = interactive ? 'auto' : 'none'\n  },\n\n  setCenterAndZoom(center, zoom) {\n    this.option.center = center\n    this.option.zoom = zoom\n  },\n\n  centerOrZoomChanged(center, zoom) {\n    const option = this.option\n    return !(v2Equal(center, option.center) && zoom === option.zoom)\n  },\n\n  defaultOption: {\n    center: [116.397428, 39.90923],\n    zoom: 5,\n    resizeEnable: true,\n    // extension specific options\n    echartsLayerInteractive: true,\n    renderOnMoving: false,\n    largeMode: false,\n  }\n}\n\nexport default isNewEC\n  ? ComponentModel.extend(TMapModel)\n  : TMapModel\n","import { ComponentView, getInstanceByDom, throttle } from \"echarts/lib/echarts\";\nimport { COMPONENT_TYPE, isNewEC, clearLogMap } from \"./helper\";\n\nconst TMapView = {\n  type: COMPONENT_TYPE,\n\n  init() {\n    this._isFirstRender = true;\n  },\n\n  render(tmapModel, ecModel, api) {\n    let rendering = true;\n\n    const tmap = tmapModel.getTMap();\n    const viewportRoot = api.getZr().painter.getViewportRoot();\n    const offsetEl = tmapModel.getRoot();\n    const coordSys = tmapModel.coordinateSystem;\n\n    const renderOnMoving = tmapModel.get(\"renderOnMoving\");\n    const resizeEnable = tmapModel.get(\"resizeEnable\");\n    const largeMode = tmapModel.get(\"largeMode\");\n\n    let moveHandler = function (e) {\n      if (rendering) {\n        return;\n      }\n\n      const offsetElStyle = offsetEl.style;\n      const mapOffset = [\n        -parseInt(offsetElStyle.left, 10) || 0,\n        -parseInt(offsetElStyle.top, 10) || 0,\n      ];\n      // only update style when map offset changed\n      const viewportRootStyle = viewportRoot.style;\n      const offsetLeft = mapOffset[0] + \"px\";\n      const offsetTop = mapOffset[1] + \"px\";\n      if (viewportRootStyle.left !== offsetLeft) {\n        viewportRootStyle.left = offsetLeft;\n      }\n      if (viewportRootStyle.top !== offsetTop) {\n        viewportRootStyle.top = offsetTop;\n      }\n      coordSys.setMapOffset((tmapModel.__mapOffset = mapOffset));\n      const actionParams = {\n        type: \"tmapRoam\",\n        animation: {\n          // compatible with ECharts 5.x\n          // no delay for rendering but remain animation of elements\n          duration: 0,\n        },\n      };\n      api.dispatchAction(actionParams);\n    };\n\n    if (this._moveHandlerPerformance) {\n      tmap.off(\"move\", this._moveHandlerPerformance);\n    }\n    // 移除上一次监听\n    if (this._resizeHandler) {\n      tmap.off(\"resize\", this._resizeHandler);\n    }\n    if (this._moveStartHandler) {\n      tmap.off(\"movestart\", this._moveStartHandler);\n    }\n    if (this._moveEndHandler) {\n      tmap.off(\"moveend\", this._moveEndHandler);\n      tmap.off(\"zoomend\", this._moveEndHandler);\n    }\n\n    if (!renderOnMoving) {\n      this._moveStartHandler = () => {\n        setTimeout(function () {\n          tmapModel.setEChartsLayerVisibility(false);\n        }, 0);\n      };\n      tmap.on(\"movestart\", this._moveStartHandler);\n    } else {\n      this._moveHandlerPerformance = throttle(moveHandler, 14, true);\n      tmap.on(\"move\", this._moveHandlerPerformance);\n    }\n    // 移动结束渲染\n    this._moveEndHandler = (e) => {\n      moveHandler(e);\n      // 展示隐藏图层\n      if (!renderOnMoving) {\n        setTimeout(function () {\n          tmapModel.setEChartsLayerVisibility(true);\n        }, 0);\n      }\n    };\n    tmap.on(\"moveend\", this._moveEndHandler);\n    tmap.on(\"zoomend\", this._moveEndHandler);\n\n    if (resizeEnable) {\n      let resizeHandler = function () {\n        getInstanceByDom(api.getDom()).resize();\n      };\n      if (largeMode) {\n        resizeHandler = throttle(resizeHandler, 20, true);\n      }\n      tmap.on(\"resize\", (this._resizeHandler = resizeHandler));\n    }\n\n    this._isFirstRender = rendering = false;\n  },\n\n  dispose() {\n    clearLogMap();\n    const component = this.__model;\n    if (component) {\n      const root = component.getRoot();\n      if (root) {\n        root.innerHTML = \"\";\n      }\n      component.setTMap(null);\n      component.setEChartsLayer(null);\n      if (component.coordinateSystem) {\n        component.coordinateSystem.setTMap(null);\n        component.coordinateSystem = null;\n      }\n      delete this._resizeHandler;\n      delete this._moveStartHandler;\n      delete this._moveEndHandler;\n      delete this._moveHandlerPerformance;\n    }\n  },\n};\n\nexport default isNewEC ? ComponentView.extend(TMapView) : TMapView;\n","import TMapCoordSys from './TMapCoordSys'\nimport TMapModel from './TMapModel'\nimport TMapView from './TMapView'\nimport { isNewEC, ecVer, COMPONENT_TYPE } from './helper'\n\nexport { version, name } from '../package.json'\n\nexport function install(registers) {\n  // add coordinate system support for pie series for ECharts < 5.4.0\n  if (!isNewEC || (ecVer[0] == 5 && ecVer[1] < 4)) {\n    registers.registerLayout(function(ecModel) {\n      ecModel.eachSeriesByType('pie', function (seriesModel) {\n        const coordSys = seriesModel.coordinateSystem\n        const data = seriesModel.getData()\n        const valueDim = data.mapDimension('value')\n        if (coordSys && coordSys.type === COMPONENT_TYPE) {\n          const center = seriesModel.get('center')\n          const point = coordSys.dataToPoint(center)\n          const cx = point[0]\n          const cy = point[1]\n          data.each(valueDim, function (value, idx) {\n            const layout = data.getItemLayout(idx)\n            layout.cx = cx\n            layout.cy = cy\n          })\n        }\n      })\n    })\n  }\n  // Model\n  isNewEC\n    ? registers.registerComponentModel(TMapModel)\n    : registers.extendComponentModel(TMapModel)\n  // View\n  isNewEC\n    ? registers.registerComponentView(TMapView)\n    : registers.extendComponentView(TMapView)\n  // Coordinate System\n  registers.registerCoordinateSystem(COMPONENT_TYPE, TMapCoordSys)\n  // Action\n  registers.registerAction(\n    {\n      type: COMPONENT_TYPE + 'Roam',\n      event: COMPONENT_TYPE + 'Roam',\n      update: 'updateLayout'\n    },\n    function(payload, ecModel) {\n      ecModel.eachComponent(COMPONENT_TYPE, function(tmapModel) {\n        const tmap = tmapModel.getTMap()\n        const center = tmap.getCenter()\n        tmapModel.setCenterAndZoom([center.lng, center.lat], tmap.getZoom())\n      })\n    }\n  )\n}\n","/**\n * TODO use `echarts/core` rather than `echarts/lib/echarts`\n * to avoid self-registered `CanvasRenderer` and `DataSetComponent` in Apache ECharts 5\n * but it's not compatible with echarts v4. Leave it to 2.0.\n */\nimport * as echarts from 'echarts/lib/echarts'\nimport { install } from './src/index'\nimport { isNewEC } from './src/helper'\n\nisNewEC ? echarts.use(install) : install(echarts)\n\nexport { name, version } from './src/index'\n"],"names":["ecVer","version","split","isNewEC","COMPONENT_TYPE","v2Equal","a","b","logMap","logWarn","tag","msg","once","log","concat","console","warn","clearLogMap","dataToCoordSize","dataSize","dataItem","zrUtil","map","dimIdx","val","halfSize","p1","p2","Math","abs","dataToPoint","excludedOptions","TMapCoordSys","tmap","api","_tmap","_api","_mapOffset","TMapCoordSysProto","prototype","setZoom","zoom","_zoom","setCenter","center","lnglat","T","LngLat","_center","lngLatToContainerPoint","setMapOffset","mapOffset","setTMap","getTMap","data","px","x","y","pointToData","pt","containerPointToLngLat","Point","lng","lat","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","create","prepareCustoms","rect","coordSys","type","width","height","coord","bind","size","convertToPixel","ecModel","finder","value","convertFromPixel","tmapCoordSys","eachComponent","tmapModel","Error","echartsLayerInteractive","get","root","getDom","painter","getZr","viewportRoot","getViewportRoot","className","style","visibility","tmapRoot","querySelector","left","top","removeChild","document","createElement","cssText","appendChild","options","clone","each","key","Map","nativeSetMapStyle","setStyle","arguments","apply","__mapStyle","setTimeout","zIndex","setRoot","setEChartsLayer","getViewportRootOffset","offsetLeft","offsetTop","oldEChartsLayerInteractive","__echartsLayerInteractive","setEChartsLayerInteractive","tmapCenter","getCenter","tmapZoom","getZoom","centerOrZoomChanged","centerAndZoom","originalMapStyle","newMapStyle","__mapOffset","coordinateSystem","eachSeries","seriesModel","dimensions","TMapModel","__tmap","__root","getRoot","layer","__echartsLayer","getEChartsLayer","setEChartsLayerVisibility","visible","display","interactive","option","pointerEvents","setCenterAndZoom","defaultOption","resizeEnable","renderOnMoving","largeMode","ComponentModel","extend","TMapView","init","_isFirstRender","render","rendering","offsetEl","moveHandler","e","offsetElStyle","parseInt","viewportRootStyle","actionParams","animation","duration","dispatchAction","_moveHandlerPerformance","off","_resizeHandler","_moveStartHandler","_moveEndHandler","on","throttle","resizeHandler","getInstanceByDom","resize","dispose","component","__model","innerHTML","ComponentView","install","registers","registerLayout","eachSeriesByType","getData","valueDim","mapDimension","point","cx","cy","idx","layout","getItemLayout","registerComponentModel","extendComponentModel","registerComponentView","extendComponentView","registerCoordinateSystem","registerAction","event","update","payload","echarts","use"],"mappings":"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"}